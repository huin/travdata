!Group
templates:
- !TableExtraction &one-row-header
  row_folding:
  - !StaticRowCounts
    row_counts: [1]
  - !EmptyColumn
    column_index: 0
- !TableExtraction &two-row-header
  row_folding:
  - !StaticRowCounts
    row_counts: [2]
  - !EmptyColumn
    column_index: 0
groups:
  traveller-creation: !Group
    tables:
      ageing: !Table
        extraction: *one-row-header
      background-skills: !Table
        extraction: !TableExtraction
          add_header_row:
          - Skill and level
      benefits-of-rank: !Table
        extraction: *one-row-header
      career-summary: !Table
        extraction: !TableExtraction {}
      characteristic-modifiers: !Table
        extraction: *one-row-header
      draft-selection: !Table
        extraction: *one-row-header
      injuries: !Table
        extraction: *one-row-header
      life-events: !Table
        extraction: *one-row-header
      medical-bills: !Table
        extraction: *one-row-header
      noble-titles: !Table
        extraction: *one-row-header
      pension: !Table
        extraction: *one-row-header
      pre-career-events: !Table
        extraction: *one-row-header
      skills-package: !Table
        extraction: !!null
    groups:
      careers: !Group
        groups:
          01-agent: !Group
            tags: [career, career-code/1, career/agent]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-law-enforcement: !Table
                tags: [rank/law-enforcement, type/career-rank]
                extraction: *one-row-header
              ranks-intel-corp: !Table
                tags: [rank/intel-corp, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          02-army: !Group
            tags: [career, career-code/2, career/army]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *two-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-enlisted: !Table
                tags: [rank/enlisted, type/career-rank]
                extraction: *one-row-header
              ranks-officer: !Table
                tags: [rank/officer, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          03-citizen: !Group
            tags: [career, career-code/3, career/citizen]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-corporate: !Table
                tags: [rank/corporate, type/career-rank]
                extraction: *one-row-header
              ranks-worker: !Table
                tags: [rank/worker, type/career-rank]
                extraction: *one-row-header
              ranks-colonist: !Table
                tags: [rank/colonist, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          04-drifter: !Group
            tags: [career, career-code/4, career/drifter]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-barbarian: !Table
                tags: [rank/barbarian, type/career-rank]
                extraction: *one-row-header
              ranks-wanderer: !Table
                tags: [rank/wanderer, type/career-rank]
                extraction: *one-row-header
              ranks-scavenger: !Table
                tags: [rank/scavenger, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          05-entertainer: !Group
            tags: [career, career-code/5, career/entertainer]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-artist: !Table
                tags: [rank/artist, type/career-rank]
                extraction: *one-row-header
              ranks-journalist: !Table
                tags: [rank/journalist, type/career-rank]
                extraction: *one-row-header
              ranks-performer: !Table
                tags: [rank/performer, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          06-marine: !Group
            tags: [career, career-code/6, career/marine]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *two-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-enlisted: !Table
                tags: [rank/enlisted, type/career-rank]
                extraction: *one-row-header
              ranks-officer: !Table
                tags: [rank/officer, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          07-merchant: !Group
            tags: [career, career-code/7, career/merchant]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-merchant-marine: !Table
                tags: [rank/merchant-marine, type/career-rank]
                extraction: *one-row-header
              ranks-free-trader: !Table
                tags: [rank/free-trader, type/career-rank]
                extraction: *one-row-header
              ranks-broker: !Table
                tags: [rank/broker, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          08-navy: !Group
            tags: [career, career-code/8, career/navy]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *two-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-enlisted: !Table
                tags: [rank/enlisted, type/career-rank]
                extraction: *one-row-header
              ranks-officer: !Table
                tags: [rank/officer, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          09-noble: !Group
            tags: [career, career-code/9, career/noble]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-adminstrator: !Table
                tags: [rank/adminstrator, type/career-rank]
                extraction: *one-row-header
              ranks-diplomat: !Table
                tags: [rank/diplomat, type/career-rank]
                extraction: *one-row-header
              ranks-dilettante: !Table
                tags: [rank/dilettante, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          10-rogue: !Group
            tags: [career, career-code/10, career/rogue]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-thief: !Table
                tags: [rank/thief, type/career-rank]
                extraction: *one-row-header
              ranks-enforcer: !Table
                tags: [rank/enforcer, type/career-rank]
                extraction: *one-row-header
              ranks-pirate: !Table
                tags: [rank/pirate, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          11-scholar: !Group
            tags: [career, career-code/11, career/scholar]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-field-researcher: !Table
                tags: [rank/field-researcher, type/career-rank]
                extraction: *one-row-header
              ranks-scientist: !Table
                tags: [rank/scientist, type/career-rank]
                extraction: *one-row-header
              ranks-physician: !Table
                tags: [rank/physician, type/career-rank]
                extraction: !TableExtraction
                  # For some reason, header captures spurious data, so leave it
                  # out of the Tabula template, and add it back manually.
                  add_header_row:  
                  - RANK
                  - PHYSICIAN
                  - SKILL OR BONUS
                  row_folding:
                  - !StaticRowCounts
                    row_counts: [1]
                  - !EmptyColumn
                    column_index: 0
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          12-scout: !Group
            tags: [career, career-code/12, career/scout]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks: !Table
                tags: [rank/None, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: !TableExtraction
                  # For some reason, header captures spurious data, so leave it
                  # out of the Tabula template, and add it back manually.
                  add_header_row:  
                  - 1D
                  - MISHAP
                  row_folding:
                  - !StaticRowCounts
                    row_counts: [1]
                  - !EmptyColumn
                    column_index: 0
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          13-prisoner: !Group
            tags: [career, career-code/13, career/prisoner]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *one-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks: !Table
                tags: [rank/None, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
          x-psion: !Group
            tags: [career, career-code/x, career/psion]
            tables:
              career-progress: !Table
                tags: [type/career-progress]
                extraction: *one-row-header
              mustering-out: !Table
                tags: [type/career-mustering-out]
                extraction: *one-row-header
              skills-and-training-general: !Table
                tags: [type/career-skills-and-training-general]
                extraction: *two-row-header
              skills-and-training-assignment: !Table
                tags: [type/career-skills-and-training-assignment]
                extraction: *one-row-header
              ranks-wild-talent: !Table
                tags: [rank/wild-talent, type/career-rank]
                extraction: *one-row-header
              ranks-adept: !Table
                tags: [rank/adept, type/career-rank]
                extraction: *one-row-header
              ranks-psi-warrior: !Table
                tags: [rank/psi-warrior, type/career-rank]
                extraction: *one-row-header
              mishap: !Table
                tags: [type/career-mishap]
                extraction: *one-row-header
              event: !Table
                tags: [type/career-event]
                extraction: *one-row-header
  skills-and-tasks: !Group
    tables:
      effect-results: !Table
        extraction: !TableExtraction
          row_folding:
          - !StaticRowCounts
            row_counts: [1, 3, 1, 5, 3, 1, 2]
          - !EmptyColumn
            column_index: 0
      task-chain: !Table
        extraction: !TableExtraction
          row_folding:
          - !StaticRowCounts
            row_counts: [3, 2, 2, 2, 2, 2, 2]
      task-difficulty: !Table
        extraction: !TableExtraction {}
      timeframes: !Table
        extraction: !TableExtraction
          row_folding:
          - !StaticRowCounts 
            row_counts: [1, 2, 2, 3, 2, 4, 3, 2, 2, 2, 2]
  combat: !Group
    tables:
      common-modifiers: !Table
        extraction: *one-row-header
      cover: !Table
        extraction: *one-row-header
  encounters-and-dangers: !Group
    tables:
      allies-and-enemies: !Table
        extraction: *one-row-header
      character-experience: !Table
        extraction: *one-row-header
      character-quirks: !Table
        extraction: *one-row-header
      encounter-distance: !Table
        extraction: *one-row-header
      encounter-modifiers: !Table
        extraction: !TableExtraction
          row_folding:
          - !StaticRowCounts
            row_counts: [1, 1, 1, 1, 2, 2]
          add_header_row:
          - Circumstance
          - Modifier
      experience-levels: !Table
        extraction: *one-row-header
      range-bands: !Table
        extraction: *one-row-header
      temperatures: !Table
        extraction: *one-row-header
    groups:
      animal: !Group
        tables:
          behaviours: !Table
            extraction: !!null
          flight-or-fight: !Table
            extraction: *one-row-header
          sizes: !Table
            extraction: *one-row-header
      dangers: !Group
        tables:
          disease: !Table
            extraction: *one-row-header
          poisons: !Table
            extraction: *two-row-header
      patrons-and-missions: !Group
        tables:
          random-mission: !Table
            extraction: *one-row-header
          random-opposition: !Table
            extraction: *one-row-header
          random-patrons: !Table
            extraction: *one-row-header
          random-targets: !Table
            extraction: *one-row-header
      random-encounters: !Group
        tables:
          rural: !Table
            extraction: *one-row-header
          starport: !Table
            extraction: *one-row-header
          urban: !Table
            extraction: *one-row-header
  vehicles: !Group
    tables:
      critical-hit-effects: !Table
        extraction: *one-row-header
      critical-hits-location: !Table
        extraction: *one-row-header
      speed-bands: !Table
        extraction: *one-row-header
      vehicle-equipment: !Table
        extraction: *one-row-header
      vehicle-weapons: !Table
        extraction: *one-row-header
    groups:
      vehicles: !Group
        templates:
          - tables: &vehicle-tables
              equipment: !Table
                tags: [type/vehicle-equipment]
                extraction: !TableExtraction {}
              spec: !Table
                tags: [type/vehicle-spec]
                extraction: !TableExtraction {}
              armour: !Table
                tags: [type/vehicle-armour]
                extraction: !TableExtraction {}
        groups:
          air-raft: !Group
            tags: [vehicle, vehicle/air-raft]
            tables: *vehicle-tables
          atv: !Group
            tags: [vehicle, vehicle/atv]
            tables: *vehicle-tables
          brutus-heavy-cargo-truck: !Group
            tags: [vehicle, vehicle/brutus-heavy-cargo-truck]
            tables: *vehicle-tables
          cargo-lifter: !Group
            tags: [vehicle, vehicle/cargo-lifter]
            tables: *vehicle-tables
          g-bike: !Group
            tags: [vehicle, vehicle/g-bike]
            tables: *vehicle-tables
          g-carrier: !Group
            tags: [vehicle, vehicle/g-carrier]
            tables: *vehicle-tables
          g-racer: !Group
            tags: [vehicle, vehicle/g-racer]
            tables: *vehicle-tables
          gecko: !Group
            tags: [vehicle, vehicle/gecko]
            tables: *vehicle-tables
          gunskiff: !Group
            tags: [vehicle, vehicle/gunskiff]
            tables: *vehicle-tables
          personal-land-yacht: !Group
            tags: [vehicle, vehicle/personal-land-yacht]
            tables: *vehicle-tables
  trade: !Group
    tables:
      trade-goods: !Table
        type: TradeGood
        extraction: *one-row-header
  worldcreation: !Group
    tables:
      governments: !Table
        type: Government
        extraction: *two-row-header
      law-levels: !Table
        type: LawLevel
        extraction: *two-row-header
      trade-codes: !Table
        type: TradeCode
        extraction: *one-row-header
